---
sidebar_label: 토큰 유통 모델
hide_table_of_contents: false
sidebar_position: 2
---

# 유통 모델

BC 및 BSC는 BNB 및 BEP8/BEP2/BEP20 토큰에 대해 동일한 토큰 유니버스를 공유합니다. 이는 다음을 정의합니다.

- 동일한 토큰이 두 네트워크에서 유통될 수 있으며, 체인 간 통신 메커니즘을 통해 두 네트워크 간에 양방향으로 흐릅니다. 
- 동일한 토큰의 총 발행량은 두 네트워크에서 관리되어야 합니다. 즉, 토큰의 총 유효 공급은 BSC와 BC 모두에서 토큰의 총 유효 공급의 합이어야 합니다.
- 토큰은 처음에 BSC에서 BEP20으로, BC에서 BEP2로 생성한 후 다른 쪽에서 생성할 수 있습니다. 두 네트워크를 모두 연결하여 토큰의 총 공급을 확보할 수 있는 자체적 방법들이 있습니다.

## Peg 계정
두 체인 모두에서 토큰의 총 유통량을 확보하기 위해 토큰을 체인에 고정하는 `Peg Account`를 도입합니다.
`Peg Account`는 순수 코드로 제어되는 계정으로서 누구도 해당 계정에 접근할 수 있는 권한이 없습니다.
 
- BC의 경우 `Peg 계정`은 `bnb1v8vkkymvhe2sf7gd2092ujc6hweta38xadu2pj`. (테스트넷은 `tbnb1v8vkkymvhe2sf7gd2092ujc6hweta38xnc4wpr`)
- BSC의 경우 `Peg Account`은 [TokenHub](https://bscscan.com/address/0x0000000000000000000000000000000000001004) 컨트랙트입니다.

## 바인딩
토큰 바인딩은 BEP2/BEP8 및 BEP20이 준비된 후 언제든지 수행될 수 있습니다. BEP2/BEP8 또는 BEP20의 토큰 소유자는 크로스 체인 기능이 필요한 경우에만 **바인딩** 프로세스를 수행하면 됩니다.

**바인딩** 프로세스는 BC와 BSC에서 두 토큰 간의 관계를 구축하는 데 도움이 됩니다. 두 토큰이 동일한 심볼과 총 공급을 공유하도록 합니다. 가장 중요한 부분은 총 유통량이 총 공급량과 동일하도록 하기 위해 두 체인 모두에서 유통량을 재배분한다는 것입니다. 

예를 들어 보겠습니다.

1. Bob은 BC에서 총 10개의 BTC를 발행하여 Alice에게 2 BTC를 보냅니다.
2. Bob은 BSC에서 총 10개의 BTC를 발행하여 Tom에게 1 BTC를 보냅니다.

이제 밥은 BC와 BSC 사이에 BTC가 유통되기를 원하지만 BC와 BSC의 총 물량은 20=10+10 BTC로, 옳지 않습니다. 이 두 토큰을 바인딩하기로 결정합니다. 그는 BC에서 8 BTC가 유통되고 BSC에서 2 BTC가 유통될 것이라 결정한 후 바인드 트랜잭션을 시작했습니다.

BC 실행 엔진은:
1. Bob의 계정에서 2 BTC를 `Peg Account`로 이체합니다. 
2. 크로스체인 체인 이벤트를 발생시킵니다.

현재 BC에서 Bob은 6 BTC, Alice는 2 BTC, 2 BTC는 `Peg Account`에 잠겨 있으며, BC에서의 유통량은 8 BTC입니다.

릴레이어는 BC에서 크로스 체인 이벤트를 관찰하고 BSC에서 [TokenManager](https://bscscan.com/address/0x0000000000000000000000000000000000001008) 컨트랙트로 트랜잭션을 전송합니다.

그런 다음 Bob은 BSC에서 BTC 컨트랙트를 실행하여 자신의 계정 중 8 BTC를 지출하도록 [TokenManager](https://bscscan.com/address/0x0000000000000000000000000000000000001008)를 승인합니다.
그런 다음 Bob은 [TokenManager](https://bscscan.com/address/0x0000000000000000000000000000000000001008)를 호출하여 바인딩 요청을 승인합니다. 
[TokenManager](https://bscscan.com/address/0x0000000000000000000000000000000000001008)가 Bob의 계정에서 `Peg Account`로 8 BTC를 이체합니다.
 
현재 BSC에서는 Bob이 BTC 1개, Tom이 BTC 1개를 가지고 있으며 8개의 BTC가 `Peg Account`에 잠겨 있고, BSC의 유통량은 2 BTC입니다.

바인딩 프로세스는 여기서 종료되며, 두 체인의 총 순환량은 총 공급량과 동일한 10 BTC입니다.

## 크로스 체인 전송

하나의 토큰이 네이티브 체인에서 병렬 체인으로 전송될 때 프로세스는 다음과 같습니다.
1. 발신자에서 네이티브 체인의 `Peg Account`로 토큰이 전송됩니다.  
2. `Peg Account`에서 병렬 체인의 수신기로 토큰이 전송됩니다.

## 소각
사용자가 네이티브 체인에 일정량의 토큰을 소각할 때 병렬 체인에서 소각할 필요가 없습니다.

예를 들어 보겠습니다.

1. BC에서의 유통량은 5 BTC이고, BSC에서의 유통량은 5 BTC입니다.
2. 사용자가 BC에서 2 BTC를 소각합니다.
3. 현재 BC의 유통량은 3 BTC이고, BSC의 유통량은 5 BTC입니다. 
4. 현재 총 유통량은 예상된 대로 8입니다.


## 발행
사용자가 네이티브 체인에 토큰을 발행하지만 병렬 체인에 토큰을 발행하지 않을 경우, 사용자가 네이티브 체인에서 병렬 체인으로 모든 토큰을 교차 전송할 수 없는 문제가 발생할 수 있습니다.

예를 들어 보겠습니다.

1. BC의 유통량은 5 BTC이고, 예치된 토큰은 5 BTC입니다.
2. BSC의 유통량은 5 BTC이고, 예치된 토큰은 5 BTC입니다.
3. 사용자가 BC에서 2 BTC를 발행합니다.
4. BSC의 `Peg Account` 잔액이 5 BTC이고, 7 BTC를 언락할 수 없기 때문에 사용자가 BC에서 BSC로 7 BTC를 전송하려고 하면 실패합니다.

발행 모범 사례는 다음과 같습니다.

1. 네이티브 체인에서 토큰을 발행합니다.
2. 병렬 체인에서 토큰을 발행합니다.
3. 병렬 체인의 `Peg Account`에 발행된 토큰을 이체합니다.